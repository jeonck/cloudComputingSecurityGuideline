# 데이터 이전 후 사후 점검(Post-Migration Validation) 체크리스트

데이터 이전 후 **사후 점검(Post-Migration Validation)**은 이전 작업의 성공 여부와 서비스 안정성을 최종적으로 확보하는 가장 중요한 단계입니다. 점검 방법, 절차적 단계, 효과적 수행, 검증 신뢰성 측면에서 아래와 같이 정리할 수 있습니다.

---

## 1. 사후 점검의 절차적 단계 위치 및 목표 🎯

사후 점검은 크게 이전 직후의 정합성 검증과 서비스 개시 후의 안정화 검증으로 나뉩니다.

| 단계 | 절차적 위치 | 주요 목표 |
|------|-------------|-----------|
| **1단계: 이전 데이터 검증 (Go/No-Go)** | 데이터 이전 작업 완료 직후 (서비스 개시 직전) | 소스와 타겟 간 데이터의 완벽한 일치 여부 확인 (정합성) 및 애플리케이션의 기본 동작 확인. 이 단계에서 서비스 개시(Cutover) 여부를 최종 결정합니다. |
| **2단계: 시스템 안정화 검증** | 서비스 개시(Cutover) 직후부터 일정 기간 (예: 1주일) | 실제 사용자 트랜잭션 하에서 성능 저하, 오류 발생 여부 등 시스템의 지속적인 안정성을 확보합니다. |

---

## 2. 효과적인 사후 점검 수행 방법 및 점검 항목

### A. 데이터베이스 (DB) 사후 점검

| 점검 방법 | 효과적인 수행 및 신뢰성 확보 방안 | 점검 항목 |
|-----------|-----------------------------------|-----------|
| **개수 비교 검증** | Row Count Check: 소스와 타겟 테이블의 전체 행 개수를 비교합니다. 가장 빠르고 기본적인 검증이지만 신뢰성이 낮습니다. | ✅ 전체 Row 수 일치 여부 |
| **통계 기반 검증** | Check Sum/Hash Value: 특정 핵심 컬럼 또는 전체 테이블 데이터를 기준으로 체크섬이나 해시 값을 생성하여 비교합니다. 데이터 내용의 정합성 신뢰도가 높습니다. | ✅ 핵심 테이블의 Check Sum 일치 (예: 고객, 주문, 재고 테이블) |
| **샘플링 & 드릴다운 검증** | 랜덤 샘플 데이터 추출: 데이터의 무작위 샘플을 추출하여 1:1로 비교하고, **Null 값, 특수문자, 대용량 필드(LOB)**를 포함하는 레코드를 중점적으로 확인합니다. | ✅ 데이터 타입 변환 필드의 값 일치 |
| **성능 벤치마크** | Top N 쿼리 테스트: 서비스에서 가장 빈번하게 사용되는 핵심 쿼리(Top N)의 응답 속도를 소스 DB와 비교합니다. | ✅ 주요 쿼리 응답 시간 (Latency) 비교 |

### B. 파일데이터 사후 점검

| 점검 방법 | 효과적인 수행 및 신뢰성 확보 방안 | 점검 항목 |
|-----------|-----------------------------------|-----------|
| **메타데이터 비교** | 총 용량 및 개수 비교: 이전 전후의 총 파일 용량과 파일 개수가 일치하는지 확인합니다. | ✅ 총 용량, 총 파일 개수 일치 여부 |
| **무결성 검증** | File Hash Value: 대용량 파일의 경우 파일 전체에 대한 SHA-256 등의 해시 값을 생성하여 비교합니다. 전송 과정에서의 데이터 변조나 손상 여부 신뢰성이 높습니다. | ✅ 핵심 파일의 Hash Value 일치 |
| **권한/경로 검증** | 애플리케이션 관점의 접근 테스트: 애플리케이션 서버에서 직접 파일을 생성, 읽기, 수정, 삭제하는 테스트를 수행하여 권한 및 경로 설정 정합성을 확인합니다. | ✅ 파일 소유권, 권한(r/w/x) 일치 |

---

## 3. 검증 신뢰성 확보를 위한 핵심 전략 (놓치기 쉬운 항목)

| 전략 | 설명 | 기대 효과 (신뢰성 향상) |
|------|-------|-----------------------|
| **데이터 Lock 설정 및 해제** | 이전 작업 기간 동안 소스 DB/파일 시스템에 신규 데이터 입력(쓰기)이 불가능하도록 Lock을 설정합니다. Lock 해제 시점은 검증 완료 후 Cutover 시점으로 합니다. | 검증 중 데이터가 변경되는 것을 원천 차단하여 정합성 검증 결과의 신뢰도를 100% 확보합니다. |
| **정량적 측정 도구 사용** | 수동 비교 대신 전문 데이터 이전/비교 솔루션이나 스크립트를 사용하여 비교합니다. 특히, Null 값, 공백, 데이터 타입별 정합성 체크에 유리합니다. | 인적 오류를 배제하고, 수백만 건 이상의 대용량 데이터에 대한 검증 시간을 단축하며 신뢰성을 높입니다. |
| **롤백(Rollback) 시뮬레이션** | 사전에 정의된 롤백 절차(타겟 시스템 폐쇄 및 소스 시스템 재개)를 실제로 시뮬레이션하여 절차의 유효성과 시간을 확인합니다. | 문제가 발생했을 때 신속하고 안전하게 서비스를 복구할 수 있는 능력을 검증하여 이전에 대한 심리적/기술적 안정감을 확보합니다. |
| **실사용자 시나리오 기반 테스트** | 단순 기능 테스트를 넘어, **실제 사용자가 가장 많이 사용하는 시나리오(Critical Path)**를 중심으로 End-to-End 테스트를 수행합니다. | 데이터 정합성뿐만 아니라 업무 로직 및 성능의 정합성까지 검증하여 서비스 안정화의 신뢰성을 극대화합니다. |
